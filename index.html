<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Terra Rossa Spoon Juggle</title>
<style>
  body {
    font-family: sans-serif;
    text-align: center;
    background-color: #fdf6e3;
    overflow: hidden;
  }

  h1 {
    margin-top: 40px;
  }

  #character-container {
    position: relative;
    width: 560px;
    height: 400px;
    margin: 20px auto;
  }

  #character {
    width: 100%;
    position: absolute;
    bottom: 0;
    left: 0;
  }

  .spoon {
    position: absolute;
    width: 50px;
    height: 50px;
    transform-origin: 50% 50%;
  }

  .pots {
    display: flex;
    justify-content: center;
    margin-top: 20px;
    gap: 20px;
  }

  .pot {
    width: 120px;
    height: 120px;
    position: relative;
  }

  .pot img {
    width: 100%;
    height: auto;
  }

  .spoons-in-pot {
    position: absolute;
    bottom: 10px;
    left: 10px;
    display: flex;
    gap: 5px;
  }

  #controls {
    margin-top: 20px;
  }

  #drawButton, #resetButton {
    padding: 10px 20px;
    font-size: 18px;
    margin: 0 10px;
  }
</style>
</head>
<body>

<h1>Terra Rossa Spoon Juggle</h1>

<div id="character-container">
  <img id="character" src="uploaded_cartoon2.png" alt="Character">
</div>

<div class="pots">
  <div class="pot" id="A">
    <img src="pot_A.png" alt="Pot A">
    <div class="spoons-in-pot" id="potA"></div>
  </div>
  <div class="pot" id="B">
    <img src="pot_B.png" alt="Pot B">
    <div class="spoons-in-pot" id="potB"></div>
  </div>
  <div class="pot" id="C">
    <img src="pot_C.png" alt="Pot C">
    <div class="spoons-in-pot" id="potC"></div>
  </div>
  <div class="pot" id="D">
    <img src="pot_D.png" alt="Pot D">
    <div class="spoons-in-pot" id="potD"></div>
  </div>
</div>

<div id="controls">
  <button id="drawButton">Draw a Spoon</button>
  <button id="resetButton">Reset</button>
</div>

<script>
const container = document.getElementById('character-container');
const totalSpoons = 16;
const radius = 100;
let angleOffset = 0;
let spoons = [];

// Track pot spoon counts
const potCounts = { A: 0, B: 0, C: 0, D: 0 };
const potMax = 4;
const potElements = {
  A: document.getElementById('potA'),
  B: document.getElementById('potB'),
  C: document.getElementById('potC'),
  D: document.getElementById('potD')
};

// Create spoons
function createSpoons() {
  spoons = [];
  for (let i = 1; i <= totalSpoons; i++) {
    const spoonEl = document.createElement('img');
    spoonEl.src = `spoon_${i}.png`;
    spoonEl.className = 'spoon';
    container.appendChild(spoonEl);
    spoons.push({el: spoonEl, number: i, angle: (i/totalSpoons)*2*Math.PI});
  }
}
createSpoons();

// Animate spinning + juggling
function animate() {
  angleOffset += 0.02;
  const containerRect = container.getBoundingClientRect();
  const centerX = containerRect.width / 2;
  const centerY = containerRect.height / 2 - 50;

  spoons.forEach(spoon => {
    const baseX = centerX + radius * Math.cos(spoon.angle + angleOffset);
    const baseY = centerY + radius * Math.sin(spoon.angle + angleOffset);

    const jitterX = Math.sin(angleOffset * 3 + spoon.number) * 10; 
    const jitterY = Math.cos(angleOffset * 2 + spoon.number) * 8;
    const rotation = angleOffset * 180 + spoon.number * 20;

    spoon.el.style.left = (baseX + jitterX - spoon.el.width/2) + 'px';
    spoon.el.style.top = (baseY + jitterY - spoon.el.height/2) + 'px';
    spoon.el.style.transform = `rotate(${rotation}deg)`;
  });

  requestAnimationFrame(animate);
}
animate();

// Random pot selection
function getRandomPot() {
  const available = Object.keys(potCounts).filter(p => potCounts[p] < potMax);
  if (available.length === 0) return null;
  const choice = available[Math.floor(Math.random() * available.length)];
  potCounts[choice]++;
  return choice;
}

// Arc animation to pot with smooth landing and rotation
function arcToPot(spoonEl, potKey) {
  const pot = document.getElementById('pot' + potKey);
  const potRect = pot.getBoundingClientRect();

  // Spoon starting position on screen
  const startRect = spoonEl.getBoundingClientRect();
  const startX = startRect.left;
  const startY = startRect.top;

  // Destination inside pot
  const destX = potRect.left + pot.children.length * 55; // side-by-side offset
  const destY = potRect.top + pot.offsetHeight - spoonEl.offsetHeight - 10; // bottom padding

  // Move spoon to body for absolute positioning
  spoonEl.style.position = 'absolute';
  spoonEl.style.zIndex = 1000; // ensure it’s on top
  document.body.appendChild(spoonEl);

  const finalRotation = (Math.random() * 20 - 10); // -10° to +10° rotation
  const midX = (startX + destX)/2 + (Math.random()*30 - 15); 
  const midY = Math.min(startY, destY) - 150 - Math.random()*30;

  let t = 0;
  const duration = 60;

  function animateArc() {
    t++;
    const progress = t / duration;

    // Quadratic Bezier interpolation
    const x = Math.pow(1-progress,2)*startX + 2*(1-progress)*progress*midX + Math.pow(progress,2)*destX;
    const y = Math.pow(1-progress,2)*startY + 2*(1-progress)*progress*midY + Math.pow(progress,2)*destY;
    const rotation = finalRotation * progress;

    spoonEl.style.left = x + 'px';
    spoonEl.style.top = y + 'px';
    spoonEl.style.transform = `rotate(${rotation}deg)`;

    if (t < duration) requestAnimationFrame(animateArc);
    else {
      // Place spoon in pot
      spoonEl.style.position = 'relative';
      spoonEl.style.left = pot.children.length * 55 + 'px';
      spoonEl.style.top = '0px';
      spoonEl.style.transform = `rotate(${finalRotation}deg)`;
      pot.appendChild(spoonEl);
    }
  }

  animateArc();
}

// Draw a spoon
document.getElementById('drawButton').addEventListener('click', () => {
  if (spoons.length === 0) return;

  const index = Math.floor(Math.random() * spoons.length);
  const spoon = spoons.splice(index, 1)[0];

  const potKey = getRandomPot();
  if (potKey) arcToPot(spoon.el, potKey);
});

// Reset button
document.getElementById('resetButton').addEventListener('click', () => {
  Object.values(potElements).forEach(pot => {
    while (pot.firstChild) pot.removeChild(pot.firstChild);
  });

  for (let key in potCounts) potCounts[key] = 0;

  spoons.forEach(spoon => {
    if (spoon.el.parentElement === container) container.removeChild(spoon.el);
  });

  createSpoons();
});
</script>

</body>
</html>



